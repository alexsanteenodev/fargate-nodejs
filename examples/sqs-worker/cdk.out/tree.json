{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.237.1"},"children":{"SqsWorkerExampleStack":{"id":"SqsWorkerExampleStack","path":"SqsWorkerExampleStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.237.1"},"children":{"WorkQueue":{"id":"WorkQueue","path":"SqsWorkerExampleStack/WorkQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/WorkQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":345600,"queueName":"fargate-worker-queue","visibilityTimeout":30}}}}},"SqsWorker":{"id":"SqsWorker","path":"SqsWorkerExampleStack/SqsWorker","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"FargateVpc":{"id":"FargateVpc","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"SqsWorkerExampleStack/SqsWorker/FargateVpc"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.237.1"},"children":{"Subnet":{"id":"Subnet","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1a","cidrBlock":"10.0.0.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet1"}],"vpcId":{"Ref":"SqsWorkerFargateVpc5A366FAA"}}}},"Acl":{"id":"Acl","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.237.1"}},"RouteTable":{"id":"RouteTable","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet1"}],"vpcId":{"Ref":"SqsWorkerFargateVpc5A366FAA"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SqsWorkerFargateVpcPublicSubnet1RouteTable333E1651"},"subnetId":{"Ref":"SqsWorkerFargateVpcPublicSubnet1Subnet267FF789"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"SqsWorkerFargateVpcIGW05A14790"},"routeTableId":{"Ref":"SqsWorkerFargateVpcPublicSubnet1RouteTable333E1651"}}}},"EIP":{"id":"EIP","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet1/EIP","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet1"}]}}},"NATGateway":{"id":"NATGateway","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet1/NATGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["SqsWorkerFargateVpcPublicSubnet1EIP60F82900","AllocationId"]},"subnetId":{"Ref":"SqsWorkerFargateVpcPublicSubnet1Subnet267FF789"},"tags":[{"key":"Name","value":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet1"}]}}}}},"PublicSubnet2":{"id":"PublicSubnet2","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.237.1"},"children":{"Subnet":{"id":"Subnet","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1b","cidrBlock":"10.0.64.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet2"}],"vpcId":{"Ref":"SqsWorkerFargateVpc5A366FAA"}}}},"Acl":{"id":"Acl","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.237.1"}},"RouteTable":{"id":"RouteTable","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet2"}],"vpcId":{"Ref":"SqsWorkerFargateVpc5A366FAA"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SqsWorkerFargateVpcPublicSubnet2RouteTable7C54347E"},"subnetId":{"Ref":"SqsWorkerFargateVpcPublicSubnet2Subnet7EEDBCB3"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PublicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"SqsWorkerFargateVpcIGW05A14790"},"routeTableId":{"Ref":"SqsWorkerFargateVpcPublicSubnet2RouteTable7C54347E"}}}}}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.237.1"},"children":{"Subnet":{"id":"Subnet","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1a","cidrBlock":"10.0.128.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet1"}],"vpcId":{"Ref":"SqsWorkerFargateVpc5A366FAA"}}}},"Acl":{"id":"Acl","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.237.1"}},"RouteTable":{"id":"RouteTable","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet1"}],"vpcId":{"Ref":"SqsWorkerFargateVpc5A366FAA"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SqsWorkerFargateVpcPrivateSubnet1RouteTableD7C3B765"},"subnetId":{"Ref":"SqsWorkerFargateVpcPrivateSubnet1Subnet04BBA375"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"SqsWorkerFargateVpcPublicSubnet1NATGateway4B6ABCA0"},"routeTableId":{"Ref":"SqsWorkerFargateVpcPrivateSubnet1RouteTableD7C3B765"}}}}}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.237.1"},"children":{"Subnet":{"id":"Subnet","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1b","cidrBlock":"10.0.192.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet2"}],"vpcId":{"Ref":"SqsWorkerFargateVpc5A366FAA"}}}},"Acl":{"id":"Acl","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.237.1"}},"RouteTable":{"id":"RouteTable","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet2"}],"vpcId":{"Ref":"SqsWorkerFargateVpc5A366FAA"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SqsWorkerFargateVpcPrivateSubnet2RouteTable344284E3"},"subnetId":{"Ref":"SqsWorkerFargateVpcPrivateSubnet2Subnet15D9F66D"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/PrivateSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"SqsWorkerFargateVpcPublicSubnet1NATGateway4B6ABCA0"},"routeTableId":{"Ref":"SqsWorkerFargateVpcPrivateSubnet2RouteTable344284E3"}}}}}},"IGW":{"id":"IGW","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SqsWorkerExampleStack/SqsWorker/FargateVpc"}]}}},"VPCGW":{"id":"VPCGW","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"SqsWorkerFargateVpcIGW05A14790"},"vpcId":{"Ref":"SqsWorkerFargateVpc5A366FAA"}}}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/RestrictDefaultSecurityGroupCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.237.1"},"children":{"Default":{"id":"Default","path":"SqsWorkerExampleStack/SqsWorker/FargateVpc/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.237.1"}}}}}},"FargateCluster":{"id":"FargateCluster","path":"SqsWorkerExampleStack/SqsWorker/FargateCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/SqsWorker/FargateCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{}}}}},"FargateTaskDef":{"id":"FargateTaskDef","path":"SqsWorkerExampleStack/SqsWorker/FargateTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.237.1"},"children":{"TaskRole":{"id":"TaskRole","path":"SqsWorkerExampleStack/SqsWorker/FargateTaskDef/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/SqsWorker/FargateTaskDef/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SqsWorkerExampleStack/SqsWorker/FargateTaskDef/TaskRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/SqsWorker/FargateTaskDef/TaskRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["WorkQueue94013F35","Arn"]}}],"Version":"2012-10-17"},"policyName":"SqsWorkerFargateTaskDefTaskRoleDefaultPolicy7A5C0B5E","roles":[{"Ref":"SqsWorkerFargateTaskDefTaskRole7A5C7991"}]}}}}}}},"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/SqsWorker/FargateTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Sub":"960790261536.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-960790261536-us-east-1:10733b77a42497b1b174a295722da7c3d67f57afd6501db4820c45768722ae38"},"name":"FargateContainer","workingDirectory":"/app","logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"SqsWorkerFargateLogGroupBB697A6E"},"awslogs-stream-prefix":"fargate-nodejs","awslogs-region":"us-east-1"}},"environment":[{"name":"QUEUE_URL","value":{"Ref":"WorkQueue94013F35"}},{"name":"NODE_ENV","value":"production"}]}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["SqsWorkerFargateTaskDefExecutionRoleFCCA2930","Arn"]},"family":"SqsWorkerExampleStackSqsWorkerFargateTaskDefECBDCC7D","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"runtimePlatform":{"cpuArchitecture":"X86_64","operatingSystemFamily":"LINUX"},"taskRoleArn":{"Fn::GetAtt":["SqsWorkerFargateTaskDefTaskRole7A5C7991","Arn"]}}}},"FargateContainer":{"id":"FargateContainer","path":"SqsWorkerExampleStack/SqsWorker/FargateTaskDef/FargateContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.237.1"},"children":{"AssetImage":{"id":"AssetImage","path":"SqsWorkerExampleStack/SqsWorker/FargateTaskDef/FargateContainer/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.237.1"},"children":{"Staging":{"id":"Staging","path":"SqsWorkerExampleStack/SqsWorker/FargateTaskDef/FargateContainer/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.237.1"}},"Repository":{"id":"Repository","path":"SqsWorkerExampleStack/SqsWorker/FargateTaskDef/FargateContainer/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.237.1"}}}}}},"ExecutionRole":{"id":"ExecutionRole","path":"SqsWorkerExampleStack/SqsWorker/FargateTaskDef/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/SqsWorker/FargateTaskDef/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SqsWorkerExampleStack/SqsWorker/FargateTaskDef/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/SqsWorker/FargateTaskDef/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":"arn:aws:ecr:us-east-1:960790261536:repository/cdk-hnb659fds-container-assets-960790261536-us-east-1"},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["SqsWorkerFargateLogGroupBB697A6E","Arn"]}}],"Version":"2012-10-17"},"policyName":"SqsWorkerFargateTaskDefExecutionRoleDefaultPolicy3727DF11","roles":[{"Ref":"SqsWorkerFargateTaskDefExecutionRoleFCCA2930"}]}}}}}}}}},"FargateLogGroup":{"id":"FargateLogGroup","path":"SqsWorkerExampleStack/SqsWorker/FargateLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/SqsWorker/FargateLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":7}}}}},"FargateSecurityGroup":{"id":"FargateSecurityGroup","path":"SqsWorkerExampleStack/SqsWorker/FargateSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/SqsWorker/FargateSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for SqsWorker","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"SqsWorkerFargateVpc5A366FAA"}}}}}},"FargateService":{"id":"FargateService","path":"SqsWorkerExampleStack/SqsWorker/FargateService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.237.1"},"children":{"Service":{"id":"Service","path":"SqsWorkerExampleStack/SqsWorker/FargateService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"SqsWorkerFargateCluster010F9D02"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":100,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"desiredCount":1,"enableEcsManagedTags":false,"enableExecuteCommand":false,"launchType":"FARGATE","networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"SqsWorkerFargateVpcPrivateSubnet1Subnet04BBA375"},{"Ref":"SqsWorkerFargateVpcPrivateSubnet2Subnet15D9F66D"}],"securityGroups":[{"Fn::GetAtt":["SqsWorkerFargateSecurityGroup29E1B753","GroupId"]}]}},"taskDefinition":{"Ref":"SqsWorkerFargateTaskDefA701C19F"}}}},"ScalingRole":{"id":"ScalingRole","path":"SqsWorkerExampleStack/SqsWorker/FargateService/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.237.1"}},"TaskCount":{"id":"TaskCount","path":"SqsWorkerExampleStack/SqsWorker/FargateService/TaskCount","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ScalableTaskCount","version":"2.237.1"},"children":{"Target":{"id":"Target","path":"SqsWorkerExampleStack/SqsWorker/FargateService/TaskCount/Target","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.ScalableTarget","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/SqsWorker/FargateService/TaskCount/Target/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalableTarget","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalableTarget","aws:cdk:cloudformation:props":{"maxCapacity":10,"minCapacity":1,"resourceId":{"Fn::Join":["",["service/",{"Ref":"SqsWorkerFargateCluster010F9D02"},"/",{"Fn::GetAtt":["SqsWorkerFargateService0605CFC9","Name"]}]]},"roleArn":"arn:aws:iam::960790261536:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService","scalableDimension":"ecs:service:DesiredCount","serviceNamespace":"ecs"}}},"FargateSqsScaling":{"id":"FargateSqsScaling","path":"SqsWorkerExampleStack/SqsWorker/FargateService/TaskCount/Target/FargateSqsScaling","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.StepScalingPolicy","version":"2.237.1"},"children":{"LowerPolicy":{"id":"LowerPolicy","path":"SqsWorkerExampleStack/SqsWorker/FargateService/TaskCount/Target/FargateSqsScaling/LowerPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.StepScalingAction","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/SqsWorker/FargateService/TaskCount/Target/FargateSqsScaling/LowerPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalingPolicy","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"policyName":"SqsWorkerExampleStackSqsWorkerFargateServiceTaskCountTargetFargateSqsScalingLowerPolicy959F30AB","policyType":"StepScaling","scalingTargetId":{"Ref":"SqsWorkerFargateServiceTaskCountTarget3A36BD40"},"stepScalingPolicyConfiguration":{"adjustmentType":"ChangeInCapacity","metricAggregationType":"Average","stepAdjustments":[{"metricIntervalUpperBound":0,"scalingAdjustment":-1}]}}}}}},"LowerAlarm":{"id":"LowerAlarm","path":"SqsWorkerExampleStack/SqsWorker/FargateService/TaskCount/Target/FargateSqsScaling/LowerAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/SqsWorker/FargateService/TaskCount/Target/FargateSqsScaling/LowerAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"SqsWorkerFargateServiceTaskCountTargetFargateSqsScalingLowerPolicyDA81C0E1"}],"alarmDescription":"Lower threshold scaling alarm","comparisonOperator":"LessThanOrEqualToThreshold","dimensions":[{"name":"QueueName","value":{"Fn::GetAtt":["WorkQueue94013F35","QueueName"]}}],"evaluationPeriods":1,"metricName":"ApproximateNumberOfMessagesVisible","namespace":"AWS/SQS","period":60,"statistic":"Average","threshold":0}}}}},"UpperPolicy":{"id":"UpperPolicy","path":"SqsWorkerExampleStack/SqsWorker/FargateService/TaskCount/Target/FargateSqsScaling/UpperPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.StepScalingAction","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/SqsWorker/FargateService/TaskCount/Target/FargateSqsScaling/UpperPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalingPolicy","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"policyName":"SqsWorkerExampleStackSqsWorkerFargateServiceTaskCountTargetFargateSqsScalingUpperPolicy8C7D0D30","policyType":"StepScaling","scalingTargetId":{"Ref":"SqsWorkerFargateServiceTaskCountTarget3A36BD40"},"stepScalingPolicyConfiguration":{"adjustmentType":"ChangeInCapacity","metricAggregationType":"Average","stepAdjustments":[{"metricIntervalLowerBound":0,"metricIntervalUpperBound":10,"scalingAdjustment":1},{"metricIntervalLowerBound":10,"metricIntervalUpperBound":30,"scalingAdjustment":2},{"metricIntervalLowerBound":30,"scalingAdjustment":3}]}}}}}},"UpperAlarm":{"id":"UpperAlarm","path":"SqsWorkerExampleStack/SqsWorker/FargateService/TaskCount/Target/FargateSqsScaling/UpperAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"SqsWorkerExampleStack/SqsWorker/FargateService/TaskCount/Target/FargateSqsScaling/UpperAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"SqsWorkerFargateServiceTaskCountTargetFargateSqsScalingUpperPolicy5EF9DB1C"}],"alarmDescription":"Upper threshold scaling alarm","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"QueueName","value":{"Fn::GetAtt":["WorkQueue94013F35","QueueName"]}}],"evaluationPeriods":1,"metricName":"ApproximateNumberOfMessagesVisible","namespace":"AWS/SQS","period":60,"statistic":"Average","threshold":10}}}}}}}}}}}}}}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"SqsWorkerExampleStack/Custom::VpcRestrictDefaultSGCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.237.1"},"children":{"Staging":{"id":"Staging","path":"SqsWorkerExampleStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.237.1"}},"Role":{"id":"Role","path":"SqsWorkerExampleStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.237.1"}},"Handler":{"id":"Handler","path":"SqsWorkerExampleStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.237.1"}}}},"QueueUrl":{"id":"QueueUrl","path":"SqsWorkerExampleStack/QueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.237.1"}},"QueueName":{"id":"QueueName","path":"SqsWorkerExampleStack/QueueName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.237.1"}},"ServiceArn":{"id":"ServiceArn","path":"SqsWorkerExampleStack/ServiceArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.237.1"}},"ClusterName":{"id":"ClusterName","path":"SqsWorkerExampleStack/ClusterName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.237.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"SqsWorkerExampleStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"SqsWorkerExampleStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.237.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SqsWorkerExampleStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.237.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SqsWorkerExampleStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.237.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}